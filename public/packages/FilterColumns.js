"use strict";function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}require("./chunk-8a96f938.js");var __chunk_4=require("./chunk-dd581ac4.js"),__chunk_5=require("./chunk-af08879b.js"),React=require("react"),React__default=_interopDefault(React);require("./chunk-3cd28e33.js"),require("./chunk-93b2e459.js");var __chunk_10=require("./chunk-c11a7971.js"),__chunk_11=require("./chunk-9db24562.js"),mainTableActions=require("./mainTableActions.js"),FilterColumns=function(e){function a(e){var c;__chunk_4._classCallCheck(this,a),c=__chunk_4._possibleConstructorReturn(this,__chunk_4._getPrototypeOf(a).call(this,e)),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(c),"changeColumnState",function(i){c.setState(function(e){var t=__chunk_10.cloneDeep(e.settingsColumns);t[i].active=!t[i].active;var n=[];return Object.keys(t).forEach(function(e){t[e].active&&n.push(t[e].active)}),n.length?{settingsColumns:t}:null},function(){c.updateSettingsColumnsStorage(),c.getVisibleColumns()})}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(c),"updateSettingsColumnsStorage",function(e){var t=c.props.tableName,n=JSON.stringify(e||c.state.settingsColumns);localStorage.setItem(t,n)}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(c),"getVisibleColumns",function(){var t=c.state.settingsColumns,e=c.props,n=e.mainTableName,i=e.dispatch,s=[];Object.keys(t).forEach(function(e){s.push(t[e].active)}),i(mainTableActions.MTupdateVisibleColumns(s,n))}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(c),"selectMultiOpener",function(){c.setState(function(e){return{selectMultiOpened:!e.selectMultiOpened}})}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(c),"clickOut",function(e){var t=e.target;!document.querySelector(".select-multi").classList.contains("active")||t.classList.contains("select-multi")||t.closest(".select-multi")||c.setState({selectMultiOpened:!1})});var t=e.tableName,n=e.columnCategories,i=e.settingsColumns,s=localStorage.getItem(t),u=i;return s?u=JSON.parse(s):c.updateSettingsColumnsStorage(u),c.state={selectMultiOpened:!1,settingsColumns:u,columnCategories:n},c}return __chunk_4._inherits(a,e),__chunk_4._createClass(a,[{key:"componentDidMount",value:function(){this.getVisibleColumns(),__chunk_11.addEvent(window,"click",this.clickOut)}},{key:"componentWillUnmount",value:function(){__chunk_11.removeEvent(window,"click",this.clickOut)}},{key:"render",value:function(){var n=this,e=this.state,t=e.selectMultiOpened,i=e.columnCategories,s=e.settingsColumns;return React__default.createElement("div",{className:t?"select-multi active":"select-multi"},React__default.createElement("div",{role:"presentation",className:"select-multi__label",onClick:this.selectMultiOpener},this.props.title),React__default.createElement("ul",{className:"select-multi__list"},Object.keys(i).map(function(e){return React__default.createElement("li",{key:e},React__default.createElement("span",{className:"cat"},i[e]),__chunk_11.findByValue(s,e,"cat").map(function(e){var t=s[e];return React__default.createElement("span",{key:e,onClick:function(){if(t.fixed)return!1;n.changeColumnState(e)},className:"item".concat(t.active?" active":"").concat(t.fixed?" fixed":"")},t.name)}))})))}}]),a}(React.Component);__chunk_5._defineProperty(FilterColumns,"defaultProps",{columnCategories:{0:"Колонки"},mainTableName:null,title:"Настройка колонок"}),__chunk_5._defineProperty(FilterColumns,"propTypes",{tableName:__chunk_4.PropTypes.string.isRequired,columnCategories:__chunk_4.PropTypes.object,settingsColumns:__chunk_4.PropTypes.object.isRequired,mainTableName:__chunk_4.PropTypes.string,title:__chunk_4.PropTypes.string,dispatch:__chunk_4.PropTypes.func.isRequired}),FilterColumns.displayName="FilterColumns",module.exports=FilterColumns;
