"use strict";function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}require("./chunk-8a96f938.js");var __chunk_3=require("./chunk-4a240d20.js"),__chunk_5=require("./chunk-af08879b.js");require("./chunk-3cd28e33.js");var __chunk_7=require("./chunk-04fc15c7.js");require("./chunk-93b2e459.js");var __chunk_10=require("./chunk-c11a7971.js"),mainTableActions=require("./mainTableActions.js");function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){__chunk_5._defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var REQUEST_LIST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,SUCCESS_LIST_REGEXP=/^MT_LIST@(.+)_SUCCESS$/,FAILURE_LIST_REGEXP=/^MT_LIST@(.+)_FAILURE$/,SUCCESS_FILTERS_DATA_REGEXP=/^MT_FILTERS_DATA@(.+)_SUCCESS$/,tableExample={items:[],isLastPage:null,isLoading:!1,scroll:{},filtersValue:{},blockedItems:[]},initialState={filtersData:{}},reducer=function(e,t){var n,r=0<arguments.length&&void 0!==e?e:initialState,_=1<arguments.length?t:void 0;if(_.type===mainTableActions.MT_LIST_REMOVE_ITEM){var i=_.id,c=_.reducer,a=_.key,o=void 0===a?"id":a,u=__chunk_10.cloneDeep(r[c].items);u=(u=u.map(function(e){var t=__chunk_10.cloneDeep(e),n=t.findIndex(function(e){return e[o]===i});return 0<=n&&delete t[n],t.filter(function(e){return Boolean(e)})})).filter(function(e){return Array.isArray(e)&&e.length}).filter(function(e){return Boolean(e)}),(n=__chunk_10.cloneDeep(r))[c].items=u}if(_.type===mainTableActions.MT_LIST_AUTO_UPDATE_ITEM){var l=_.item,s=_.item.id,d=_.reducer,E=__chunk_10.cloneDeep(r[d].items);E=E.map(function(e){var t=__chunk_10.cloneDeep(e),n=t.findIndex(function(e){return e.id===s});return 0<=n&&(t[n]=l),t}),(n=__chunk_10.cloneDeep(r))[d].items=E}if(_.type===mainTableActions.MT_SAVE_TABLE_SCROLL){var p=_.reducer,f=_.scroll,S=__chunk_10.cloneDeep(r);n=_objectSpread({},S,__chunk_5._defineProperty({},p,_objectSpread({},S[p],{scroll:f})))}if(_.type===mainTableActions.MT_CHANGE_FILTERS_VALUE){var T=_.reducer,h=_.data,m=__chunk_10.cloneDeep(r),y=_objectSpread({},m[T],{filtersValue:_objectSpread({},m[T].filtersValue,{},h)});Object.entries(y.filtersValue).forEach(function(e){var t=__chunk_7._slicedToArray(e,2),n=t[0],r=t[1];!1!==r&&void 0!==r||delete y.filtersValue[n]}),0===h.offset&&(y.items=[]),n=_objectSpread({},r,__chunk_5._defineProperty({},_.reducer,y))}if(SUCCESS_FILTERS_DATA_REGEXP.test(_.type)){var b=_.type.match(SUCCESS_FILTERS_DATA_REGEXP)[1];if("OK"===_.payload.status){var k=_.payload.payload.items;(n=__chunk_10.cloneDeep(r)).filtersData[b]=k}}if(_.type===mainTableActions.MT_DISABLE_ITEM_SWITCHER){var I=_.data,L=_.reducer,A=_.byIndex;n=__chunk_10.cloneDeep(r),A||Object.keys(I).forEach(function(e){if(I[e]){n[L].blockedItems.indexOf(e)<0&&n[L].blockedItems.push(e)}else{var t=n[L].blockedItems.indexOf(e);0<=t&&delete n[L].blockedItems[t]}}),n[L].blockedItems=n[L].blockedItems.filter(function(e){return e})}if(REQUEST_LIST_REGEXP.test(_.type)){var v=_.type.match(REQUEST_LIST_REGEXP)[1];(n=__chunk_10.cloneDeep(r))[v].isLoading=!0}if(SUCCESS_LIST_REGEXP.test(_.type)){var D=_.type.match(SUCCESS_LIST_REGEXP)[1];if("OK"===_.payload.status){var R=_.payload,P=R.payload.items,j=R._meta,O=j.is_last_page,C=j.total;(n=__chunk_10.cloneDeep(r))[D].isLoading=!1,n[D].isLastPage=O,n[D].total=C,P.length&&(n[D].items=[].concat(__chunk_3._toConsumableArray(n[D].items),[P]))}}if(FAILURE_LIST_REGEXP.test(_.type)){var U=_.type.match(FAILURE_LIST_REGEXP)[1];(n=__chunk_10.cloneDeep(r))[U].isLoading=!1,n[U].isLastPage=!0}if(_.type===mainTableActions.MT_LIST_UPDATE_ITEMS){var g=_.items,M=_.reducer;(n=__chunk_10.cloneDeep(r))[M].items=g}if(_.type===mainTableActions.MT_UPDATE_VISIBLE_COLUMNS){var G=_.data,X=_.reducer;(n=__chunk_10.cloneDeep(r))[X].visibleColumns=G}return n||r},mainTableReducer=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){initialState[e]=__chunk_10.cloneDeep(tableExample)}),reducer};module.exports=mainTableReducer;
