"use strict";function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var __chunk_1=require("./chunk-8a96f938.js"),__chunk_2=require("./chunk-5901b6d1.js"),__chunk_3=require("./chunk-4a240d20.js"),__chunk_4=require("./chunk-dd581ac4.js"),__chunk_5=require("./chunk-af08879b.js"),React=require("react"),React__default=_interopDefault(React);require("./chunk-3cd28e33.js");var win,__chunk_10=require("./chunk-c11a7971.js"),__chunk_11=require("./chunk-c6fd0d83.js"),window_1=win="undefined"!=typeof window?window:void 0!==__chunk_1.commonjsGlobal?__chunk_1.commonjsGlobal:"undefined"!=typeof self?self:{},navigator$1=window_1.navigator,isIos=function(e){return/iPad|iPhone|iPod/.test(e)}(navigator$1?navigator$1.userAgent:""),getAfterLineObjs=function(e,t,a){var r={};if(e&&Object.keys(t).length){var n,l=Object.keys(t);if(l.length){n=t[l[0]].key;var i=a.filter(function(e){return 0<=l.indexOf(e[n].toString())});if(i.length)for(var s=0;s<i.length;s+=1){var o=i[s][n];r[o]=t[o]}}}return r},TBodyPart=function(e){function o(e){var f;__chunk_4._classCallCheck(this,o),f=__chunk_4._possibleConstructorReturn(this,__chunk_4._getPrototypeOf(o).call(this,e)),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(f),"generateFromTemplate",function(){return f.mainFabric()}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(f),"mainFabric",function(){for(var e=f.props,a=e.tableTemplate,r=e.titleTemplate,c=e.partItems,d=e.visibleColumns,n=e.afterLineTemplate,l=e.afterLineData,i=f.state.afterLineObjs,_=[],p=[],s=[],t=function(s){var e=Object.keys(i);if(e.length){var t=l[e[0]].key;0<=e.indexOf(c[s][t].toString())&&(p[s]={id:c[s][t],items:[]})}var o=[];r&&Array.isArray(r)&&r.forEach(function(e,t){var a=e.columns.map(function(){return t});o.push.apply(o,__chunk_3._toConsumableArray(a))}),a.forEach(function(e,t){var a=e.tbody;if(!d||d[t]){var r,n,l=c[s];if(_[s]||(_[s]=[],l.id&&(_[s].id=l.id)),"function"==typeof a.value)try{r=a.value(l)}catch(e){r="n/a"}else"string"==typeof a.value?r=a.value:!a.value&&a.key&&(r=l[a.key]);"function"==typeof a.className&&(n=a.className(l));var i=a.props?__chunk_10.cloneDeep(a.props):{};o.length&&(i["js-title-index"]=o[t]),_[s][t]=n?React__default.createElement("td",__chunk_2._extends({className:n},i),r):React__default.createElement("td",i,r)}})},o=0;o<c.length;o+=1)t(o);if(p.length){p.forEach(function(e,_){for(var u=i[e.id].items,t=function(c){n.forEach(function(e,t){var a=e.tbody;if(!d||d[t]){p[_].items[c]||(p[_].items[c]=[]);var r,n,l=u[c];if("function"==typeof a.value)try{r=a.value(l)}catch(e){r="n/a"}else r="string"==typeof a.value?a.value:!(a.value||!a.key)&&l[a.key];if("function"==typeof a.className){for(var i={},s="string"==typeof a.key?[a.key]:a.key,o=0;o<s.length;o+=1)i[s[o]]=l[s[o]];n=a.className(i)}p[_].items[c][t]=n?React__default.createElement("td",__chunk_2._extends({className:n},a.props),r):React__default.createElement("td",a.props,r)}})},a=0;a<u.length;a+=1)t(a);u.length||p[_].items.push([React__default.createElement("td",{className:"no-border",colSpan:d.length},React__default.createElement("span",{className:"loading"},React__default.createElement("span",null)))])});var u=0;p.forEach(function(e,t){_.splice.apply(_,[t+u+1,0].concat(__chunk_3._toConsumableArray(e.items)));for(var a=0;a<e.items.length;a++)s.push(a+t+u+1);u+=e.items.length})}return{items:_,afterLineIndexes:s}});var t=f.props,a=t.rerenderById,r=t.partItems,n=t.afterLineTemplate,l=t.afterLineData,i=null;a&&r.find(function(e){return e.id===a})&&(i=a);var s=getAfterLineObjs(n,l,e.partItems);return f.state={rerenderById:i,afterLineObjs:s},f}return __chunk_4._inherits(o,e),__chunk_4._createClass(o,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,r=this.state.afterLineObjs,n=JSON.stringify(a.partItems)!==JSON.stringify(e.partItems),l=JSON.stringify(a.dataForRender)!==JSON.stringify(e.dataForRender),i=Boolean(t.rerenderById)&&a.rerenderById!==e.rerenderById,s=JSON.stringify(a.visibleColumns)!==JSON.stringify(e.visibleColumns),o=JSON.stringify(t.afterLineObjs)!==JSON.stringify(r);return n||l||i||s||o}},{key:"render",value:function(){var e=this.generateFromTemplate(),t=e.items,r=e.afterLineIndexes;return t.map(function(e,t){var a=0<=r.indexOf(t)?"mt_subline":"mt_line";return React__default.createElement("tr",{key:t,"data-id":e.id?e.id:t,className:a},React__default.createElement("td",{className:"padding-table"}," "),e.map(function(e,t){return React__default.createElement(React__default.Fragment,{key:t},e)}),React__default.createElement("td",{className:"padding-table"}," "))})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.rerenderById&&!e.rerenderById&&t.partItems.find(function(e){return e.id===t.rerenderById}))return{rerenderById:t.rerenderById};return t.afterLineTemplate?{afterLineObjs:getAfterLineObjs(t.afterLineTemplate,t.afterLineData,t.partItems)}:null}}]),o}(React.Component);__chunk_5._defineProperty(TBodyPart,"defaultProps",{rerenderById:null,visibleColumns:null,afterLineData:null,afterLineTemplate:null}),__chunk_5._defineProperty(TBodyPart,"propTypes",{tableTemplate:__chunk_4.PropTypes.array.isRequired,partItems:__chunk_4.PropTypes.array.isRequired,dataForRender:__chunk_4.PropTypes.object.isRequired,rerenderById:__chunk_4.PropTypes.number,visibleColumns:__chunk_4.PropTypes.array,afterLineData:__chunk_4.PropTypes.object,afterLineTemplate:__chunk_4.PropTypes.array}),TBodyPart.displayName="TBodyPart";var TBody=function(e){function l(){var e,t;__chunk_4._classCallCheck(this,l);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t=__chunk_4._possibleConstructorReturn(this,(e=__chunk_4._getPrototypeOf(l)).call.apply(e,[this].concat(r))),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(t),"blockedItemsPosition",function(){var s=t.props.refs.parent.current,o=document.querySelectorAll(".blocked-item");o.forEach(function(e,t){var a=o[t],r=a.getAttribute("item-data-id"),n=document.querySelector('tbody tr[data-id="'.concat(r,'"]'));if(!n.length){var l=s.scrollTop+(Math.abs(__chunk_11.elemOffset(n).top)-__chunk_11.elemOffset(s).top)+1,i=n.offsetHeight-1;a.style.top="".concat(l,"px"),a.style.height="".concat(i,"px"),a.style.lineHeight="".concat(i,"px")}})}),t}return __chunk_4._inherits(l,e),__chunk_4._createClass(l,[{key:"componentDidMount",value:function(){__chunk_11.addEvent(window,"resize",this.blockedItemsPosition)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.items)!==JSON.stringify(e.items),r=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),n=t.rerenderById!==e.rerenderById,l=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),i=JSON.stringify(t.afterLineData)!==JSON.stringify(e.afterLineData),s=JSON.stringify(t.blockedItems)!==JSON.stringify(e.blockedItems);return a||r||n||l||i||s}},{key:"componentDidUpdate",value:function(){this.blockedItemsPosition()}},{key:"componentWillUnmount",value:function(){__chunk_11.removeEvent(window,"resize",this.blockedItemsPosition)}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.tableTemplate,r=e.dataForRender,n=e.rerenderById,l=e.visibleColumns,i=e.afterLineTemplate,s=e.blockedItems,o=e.afterLineData,c=e.titleTemplate;return React__default.createElement(React__default.Fragment,null,t.map(function(e,t){return React__default.createElement(TBodyPart,{key:t,index:t,partItems:e,dataForRender:r,tableTemplate:a,rerenderById:n,visibleColumns:l,afterLineTemplate:i,afterLineData:o,titleTemplate:c})}),s.map(function(e){return React__default.createElement("tr",{className:"blocked-item",key:e,"item-data-id":e},React__default.createElement("td",null,React__default.createElement("span",{className:"loading"})))}))}}]),l}(React.Component);TBody.displayName="TBody";var ORDER_BY_DESC="DESC",ORDER_BY_ASC="ASC",THead=function(e){function n(){var e,g;__chunk_4._classCallCheck(this,n);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g=__chunk_4._possibleConstructorReturn(this,(e=__chunk_4._getPrototypeOf(n)).call.apply(e,[this].concat(a))),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(g),"changeSortType",function(e,t){return t.sort_by!==e?ORDER_BY_DESC:t.sort_type===ORDER_BY_DESC?ORDER_BY_ASC:ORDER_BY_DESC}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(g),"generateFromTemplate",function(){var e=g.props,t=e.tableTemplate,d=e.filtersValue,p=e.reducer,f=e.getItems,m=e.sortType,h=e.sortBy,y=e.visibleColumns,a=e.titleTemplate,b=[],k=[];return a&&Array.isArray(a)&&a.forEach(function(e,t){var a=e.columns.map(function(){return t});k.push.apply(k,__chunk_3._toConsumableArray(a))}),t.forEach(function(e,t){if(!y||y[t]){var a=e.thead,r=a.className,n=a.value,l=a.title,i=a.sortKey,s=a.sortLtr,o=e.thead,c=n;"function"==typeof n&&(c=n());var _=o.props?__chunk_10.cloneDeep(o.props):{};k.length&&(_["js-title-index"]=k[t]);var u=React__default.createElement("th",__chunk_2._extends({key:t,title:l||n,className:"".concat(r||"").concat(i?" cup":""),onClick:function(){if(!i)return!1;var e=g.changeSortType(i,d);f({sort_type:e,sort_by:i,offset:0},p)}},_),!(!s||!i)&&React__default.createElement("span",{className:"sorting ltr ".concat(h===i?m.toLowerCase():"")}),c,!(s||!i)&&React__default.createElement("span",{className:"sorting fal ".concat(h===i?m.toLowerCase():"")}));b.push(u)}}),b}),g}return __chunk_4._inherits(n,e),__chunk_4._createClass(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),r=JSON.stringify(t.sortType)!==JSON.stringify(e.sortType),n=JSON.stringify(t.sortBy)!==JSON.stringify(e.sortBy),l=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns);return a||r||n||l}},{key:"render",value:function(){var e=this.props,t=e.isHidden,a=e.setRef,r=this.generateFromTemplate();return React__default.createElement("thead",{ref:a,className:t?"no-js":"js"},React__default.createElement("tr",null,React__default.createElement("th",{className:"padding-table"}," "),r,React__default.createElement("th",{className:"padding-table"}," ")))}}]),n}(React.Component);__chunk_5._defineProperty(THead,"defaultProps",{getItems:function(){console.log('not imported function "getItems"')},reducer:"",filtersValue:{},sortType:null,sortBy:null,isHidden:!1,visibleColumns:null}),__chunk_5._defineProperty(THead,"propTypes",{tableTemplate:__chunk_4.PropTypes.array.isRequired,reducer:__chunk_4.PropTypes.string,getItems:__chunk_4.PropTypes.func,filtersValue:__chunk_4.PropTypes.object,sortType:__chunk_4.PropTypes.string,sortBy:__chunk_4.PropTypes.string,isHidden:__chunk_4.PropTypes.bool,setRef:__chunk_4.PropTypes.object.isRequired,visibleColumns:__chunk_4.PropTypes.array}),THead.displayName="THead";var TTitle=function(e){function l(){var e,a;__chunk_4._classCallCheck(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return a=__chunk_4._possibleConstructorReturn(this,(e=__chunk_4._getPrototypeOf(l)).call.apply(e,[this].concat(r))),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(a),"generateFromTemplate",function(){var e=a.props,t=e.titleTemplate,s=e.visibleColumns,o=[],c=0;return t.forEach(function(e,t){var a,r=e.props,n=e.value,l=__chunk_3._toConsumableArray(e.columns);if(s&&l.forEach(function(){s[c]&&(a=!0),c++}),!s||a){var i=React__default.createElement("th",__chunk_2._extends({key:t,"js-title-index":t},r),React__default.createElement("span",null,n));o.push(i)}}),o}),a}return __chunk_4._inherits(l,e),__chunk_4._createClass(l,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.titleTemplate)!==JSON.stringify(e.titleTemplate),r=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns);return a||r}},{key:"render",value:function(){var e=this.props.setRef,t=this.generateFromTemplate();return React__default.createElement("thead",{ref:e},React__default.createElement("tr",null,React__default.createElement("th",{className:"padding-table"}," "),t,React__default.createElement("th",{className:"padding-table"}," ")))}}]),l}(React.Component);__chunk_5._defineProperty(TTitle,"defaultProps",{visibleColumns:null}),__chunk_5._defineProperty(TTitle,"propTypes",{titleTemplate:__chunk_4.PropTypes.array.isRequired,visibleColumns:__chunk_4.PropTypes.array}),TTitle.displayName="TTitle";var TFoot=function(e){function l(){var e,r;__chunk_4._classCallCheck(this,l);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r=__chunk_4._possibleConstructorReturn(this,(e=__chunk_4._getPrototypeOf(l)).call.apply(e,[this].concat(a))),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(r),"generateFromTemplate",function(){var e=r.props,t=e.tableTemplate,l=e.visibleColumns,a=e.tfootItem,i=[],s=a?a.item:null;return!!a&&(t.forEach(function(e,t){var a,r,n=e.tfoot;if(!l||!0===l[t])if(n){if("function"==typeof n.value)try{a=n.value(s)}catch(e){a="n/a"}else"string"==typeof n.value?a=n.value:!n.value&&n.key&&(a=s[n.key]);"function"==typeof n.className&&(r=n.className(s)),i[t]=r?React__default.createElement("td",__chunk_2._extends({key:t,className:r},n.props),a):React__default.createElement("td",__chunk_2._extends({key:t},n.props),a)}else i[t]=React__default.createElement("td",{key:t})}),i)}),r}return __chunk_4._inherits(l,e),__chunk_4._createClass(l,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),r=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),n=JSON.stringify(t.tfootItem)!==JSON.stringify(e.tfootItem),l=JSON.stringify(t.items)!==JSON.stringify(e.items),i=JSON.stringify(t.tfootDataForRender)!==JSON.stringify(e.tfootDataForRender);return a||r||n||l||i}},{key:"render",value:function(){var e=this.props,t=e.setRef,a=e.tfootItem,r=e.isHidden,n=a?a.item:null,l=a?a.isLoading:null,i=this.generateFromTemplate();return React__default.createElement("tfoot",{ref:t,className:r?"no-js":"js"},!r&&this.props.tfootOtherTemplate,React__default.createElement("tr",{className:"tfoot-data",id:r?"":"tfoot-data"},React__default.createElement("td",{className:"padding-table"}," "),i,React__default.createElement("td",{className:"padding-table"}," ")),!(!n||!l||Object.keys(n).length||r)&&React__default.createElement("tr",{className:"tfoot-loading no-border"},React__default.createElement("td",null,React__default.createElement("span",{className:"loading"},React__default.createElement("span",null)))))}}]),l}(React.Component);function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(a,!0).forEach(function(e){__chunk_5._defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}__chunk_5._defineProperty(TFoot,"defaultProps",{visibleColumns:null,tfootItem:null,items:[],tfootDataForRender:null}),__chunk_5._defineProperty(TFoot,"propTypes",{tableTemplate:__chunk_4.PropTypes.array.isRequired,setRef:__chunk_4.PropTypes.object.isRequired,visibleColumns:__chunk_4.PropTypes.array,tfootItem:__chunk_4.PropTypes.object,items:__chunk_4.PropTypes.array,tfootDataForRender:__chunk_4.PropTypes.object}),TFoot.displayName="TFoot";var mobileAndTabletcheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isMobileOrTablet=mobileAndTabletcheck(),MainTable=function(e){function t(e){var B;return __chunk_4._classCallCheck(this,t),B=__chunk_4._possibleConstructorReturn(this,__chunk_4._getPrototypeOf(t).call(this,e)),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(B),"scrollHeads",function(){var e=B.table,t=e.parent.current,a=e.theadVisible.current,r=e.tfoot.current,n=e.ttitle.current,l=B.props,i=l.tfootItem,s=l.leftMenuWidth,o=l.titleTemplate;if(t){var c=s-t.scrollLeft;isIos||mobileAndTabletcheck||(c-=document.body.scrollLeft),a.style.left="".concat(c,"px"),i&&(r.style.left="".concat(c,"px"),r.style.width="".concat(t.clientWidth+t.scrollLeft,"px")),o&&(n.style.left="".concat(c,"px"),n.style.width="".concat(t.clientWidth+t.scrollLeft,"px"))}}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(B),"resizeTableColumns",function(){var e=B.props,t=e.data,a=e.reducer,r=e.tfootItem,n=e.tfootOtherTemplate,l=e.titleTemplate,i=(e.disableLazyLoad,t[a]),s=i.items,o=i.isLoading,c=i.isLastPage,_=B.table,u=_.parent.current,d=_.tbody.current,p=_.theadHidden.current,f=_.theadVisible.current,m=_.tfoot.current,h=_.ttitle.current,y=document.getElementsByClassName("table__filters")[0],b=document.getElementsByClassName("switch__pages")[0],k=y?y.offsetHeight:0,g=b?b.offsetHeight:0,v=h?h.offsetHeight:0;g&&!k&&(g+=20);var T=32+k+g,R=61+k+g;if(u.style.top="".concat(T+v,"px"),f.style.top="".concat(R+v,"px"),h&&(h.style.top="".concat(R,"px")),!o&&s.length||o&&null===c||!o&&null==c||!o&&!s.length&&c){if(f.style.width="".concat(d.offsetWidth,"px"),l){var E=document.getElementsByTagName("html")[0];h.style.width="".concat(u.clientWidth+u.scrollLeft+E.scrollLeft,"px")}if(r||n){var P=document.getElementsByTagName("html")[0];m.style.width="".concat(u.clientWidth+u.scrollLeft+P.scrollLeft,"px"),m.style.bottom="".concat(u.offsetHeight-u.clientHeight,"px")}for(var N,C=(s.length?(N="td",d.getElementsByTagName("tr")):(N="th",p.getElementsByTagName("tr")))[0].getElementsByTagName(N),O=f.getElementsByTagName("th"),w=0;w<C.length;w+=1){var I=Math.floor(C[w].offsetWidth);O[w].style.width="".concat(I,"px")}if(r&&!m.getElementsByClassName("no-border").length)for(var S=document.getElementById("tfoot-data").getElementsByTagName("td"),L=0;L<C.length;L+=1){var j=Math.floor(C[L].offsetWidth);S[L].style.width="".concat(j,"px")}if(l){var F={};C.forEach(function(e){var t=e.getAttribute("js-title-index");t&&(F[t]||(F[t]=0),F[t]+=+Math.floor(e.offsetWidth))}),h.getElementsByTagName("th").forEach(function(e,t){var a=e.getAttribute("js-title-index"),r=0;r=a?F[a]:0===t?+Math.floor(C[t].offsetWidth):+Math.floor(C[C.length-1].offsetWidth),e.style.width="".concat(r,"px")})}}B.scrollHeads()}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(B),"lazyLoad",function(){var e=B.props,t=e.data,a=e.reducer;if(e.disableLazyLoad)return!1;var r=t[a],n=r.isLastPage,l=r.isLoading;if(n||l)return!1;var i=B.table.parent.current,s=B.table.tbody.current,o=s.offsetHeight-i.offsetHeight,c=Math.abs(__chunk_11.elemOffset(s).top-__chunk_11.elemOffset(i).top);o-document.getElementsByTagName("html")[0].offsetHeight/2<c&&B.getItems()}),__chunk_5._defineProperty(__chunk_4._assertThisInitialized(B),"getItems",function(e){var t=B.props,a=t.listGet,r=t.changeFiltersValue,n=t.reducer,l=t.url,i=t.data[n],s=i.filtersValue,o=s.offset,c=s.limit,_=i.filtersValue;r(e||{offset:o+c},n);var u=!0,d=_objectSpread({},__chunk_10.cloneDeep(_),{},__chunk_10.cloneDeep(e||{}));if(B.props.requiredFilterValues.forEach(function(e){d[e]||(u=!1)}),!B.state.canDoRequest||!u)return!1;a(n,l)}),B.state={colsCount:e.tableTemplate.length+2,canDoRequest:!e.requiredFilterValues.length},B.table={parent:React__default.createRef(),ttitle:React__default.createRef(),theadVisible:React__default.createRef(),theadHidden:React__default.createRef(),tbody:React__default.createRef(),tfoot:React__default.createRef(),tfootHidden:React__default.createRef()},B}return __chunk_4._inherits(t,e),__chunk_4._createClass(t,[{key:"componentDidMount",value:function(){var e=this.props.onInit;"function"==typeof e&&e(this.getItems);var t=this.table.parent.current,a=this.props,r=a.reducer,n=a.listGet,l=a.url,i=a.data,s=a.history.action,o=a.initFiltersValue,c=a.changeFiltersValue,_=a.refreshTableOnPush;o&&(!Object.keys(i[r].filtersValue).length||_&&"PUSH"===s)&&c(o,r),(_&&"PUSH"===s||!i[r].items.length&&null===i[r].isLastPage)&&this.state.canDoRequest&&n(r,l),__chunk_11.addEvent(window,"resize",this.resizeTableColumns),__chunk_11.addEvent(t,"scroll",this.scrollHeads),__chunk_11.addEvent(window,"scroll",this.scrollHeads),__chunk_11.addEvent(document.body,"scroll",this.scrollHeads),this.resizeTableColumns();var u=i[r],d=u.items,p=u.scroll;if(p){var f=p.scrollLeft,m=p.scrollTop;d.length&&(m||f)&&this.table.parent.current.scrollTo(f,m)}}},{key:"componentDidUpdate",value:function(){var e=new Event("resize");window.dispatchEvent(e)}},{key:"componentWillUnmount",value:function(){var e=this.table.parent,t=e.current,a=e.current,r=a.scrollTop,n=a.scrollLeft,l=this.props,i=l.saveTableScroll,s=l.reducer,o=document.getElementsByTagName("html")[0];i({scrollTop:r,scrollLeft:n},s),__chunk_11.removeEvent(window,"resize",this.resizeTableColumns),__chunk_11.removeEvent(t,"scroll",this.scrollHeads),__chunk_11.removeEvent(o,"scroll",this.scrollHeads),__chunk_11.removeEvent(document.body,"scroll",this.scrollHeads)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.className,r=e.data,n=e.tableTemplate,l=e.reducer,i=e.changeFiltersValue,s=e.dataForRender,o=e.rerenderById,c=e.afterLineTemplate,_=e.tfootItem,u=e.tfootOtherTemplate,d=e.titleTemplate,p=e.visibleColumnsMiddleware,f=e.requiredFilterValuesMessage,m=r[l],h=m.isLoading,y=m.isLastPage,b=m.items,k=m.filtersValue,g=m.visibleColumns,v=m.blockedItems,T=m.subLineData,R=this.state,E=R.colsCount,P=R.canDoRequest,N=p(g);return React__default.createElement("div",{id:t,ref:this.table.parent,className:"table-list__parent ".concat(a),onWheel:this.lazyLoad,onTouchMove:this.lazyLoad},!!d&&React__default.createElement("table",{className:"table__title table-list"},React__default.createElement(TTitle,{setRef:this.table.ttitle,titleTemplate:d,visibleColumns:N})),React__default.createElement("table",{className:"table__thead table-list"},React__default.createElement(THead,{setRef:this.table.theadVisible,tableTemplate:n,changeFiltersValue:i,filtersValue:k,isLastPage:y,getItems:this.getItems,reducer:l,sortType:k.sort_type,sortBy:k.sort_by,visibleColumns:N})),React__default.createElement("table",{className:"table__tbody table-list"},React__default.createElement(THead,{setRef:this.table.theadHidden,tableTemplate:n,titleTemplate:d,filtersValue:k,isLastPage:y,getItems:this.getItems,reducer:l,isHidden:!0,sortType:k.sort_type,sortBy:k.sort_by,visibleColumns:N}),React__default.createElement("tbody",{ref:this.table.tbody},P?React__default.createElement(TBody,{items:__chunk_10.cloneDeep(b),tableTemplate:n,titleTemplate:d,rerenderById:o,dataForRender:__chunk_10.cloneDeep(s),visibleColumns:N,afterLineTemplate:c,afterLineData:T,blockedItems:v,refs:this.table}):React__default.createElement("tr",{className:"no-border"},React__default.createElement("td",{colSpan:E},React__default.createElement("span",{className:"no-data"},f))),!(b.length||!y||h||!P)&&React__default.createElement("tr",{className:"no-border"},React__default.createElement("td",{colSpan:E},React__default.createElement("span",{className:"no-data"},"No data"))),!!h&&React__default.createElement("tr",{className:"no-border"},React__default.createElement("td",{colSpan:E},React__default.createElement("span",{className:"loading"},React__default.createElement("span",null))))),!!_&&React__default.createElement(TFoot,{tableTemplate:n,tfootItem:_,isHidden:!0,setRef:this.table.tfootHidden,visibleColumns:N})),!(!_&&!u)&&React__default.createElement("table",{className:"table__thead table-list"},React__default.createElement(TFoot,{tableTemplate:n,tfootItem:_,items:__chunk_10.cloneDeep(b),tfootDataForRender:this.props.tfootDataForRender,tfootOtherTemplate:this.props.tfootOtherTemplate,setRef:this.table.tfoot,visibleColumns:N})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.requiredFilterValues.length&&!t.canDoRequest){var a=!0,r=e.reducer,n=e.data,l=e.crud,i=e.url,s=n[r].filtersValue;return e.requiredFilterValues.forEach(function(e){s[e]||(a=!1)}),a&&l({endpoint:i,meta:{reducer:r},crudTypes:{request:"MT_LIST@".concat(r,"_REQUEST"),success:"MT_LIST@".concat(r,"_SUCCESS"),failure:"MT_LIST@".concat(r,"_FAILURE")}}),{canDoRequest:a}}if(e.requiredFilterValues.length){var o=!0,c=e.reducer,_=e.data[c].filtersValue;if(e.requiredFilterValues.forEach(function(e){_[e]||(o=!1)}),!o)return{canDoRequest:o}}return{}}}]),t}(React.Component);__chunk_5._defineProperty(MainTable,"defaultProps",{reducer:"",className:"",dataForRender:{},rerenderById:null,initFiltersValue:null,refreshTableOnPush:!1,onInit:null,afterLineTemplate:null,tfootItem:null,tfootDataForRender:null,leftMenuWidth:200,titleTemplate:null,disableLazyLoad:!1,requiredFilterValues:[],visibleColumnsMiddleware:function(e){return e},requiredFilterValuesMessage:"Empty required filters"}),__chunk_5._defineProperty(MainTable,"propTypes",{url:__chunk_4.PropTypes.string.isRequired,id:__chunk_4.PropTypes.string.isRequired,tableTemplate:__chunk_4.PropTypes.array.isRequired,titleTemplate:__chunk_4.PropTypes.array,reducer:__chunk_4.PropTypes.string,data:__chunk_4.PropTypes.object.isRequired,className:__chunk_4.PropTypes.string,dataForRender:__chunk_4.PropTypes.object,rerenderById:__chunk_4.PropTypes.number,initFiltersValue:__chunk_4.PropTypes.object,refreshTableOnPush:__chunk_4.PropTypes.bool,crud:__chunk_4.PropTypes.func.isRequired,saveTableScroll:__chunk_4.PropTypes.func.isRequired,changeFiltersValue:__chunk_4.PropTypes.func.isRequired,history:__chunk_4.PropTypes.object.isRequired,onInit:__chunk_4.PropTypes.func,afterLineTemplate:__chunk_4.PropTypes.array,tfootItem:__chunk_4.PropTypes.object,tfootDataForRender:__chunk_4.PropTypes.object,leftMenuWidth:__chunk_4.PropTypes.number,visibleColumnsMiddleware:__chunk_4.PropTypes.func,requiredFilterValues:__chunk_4.PropTypes.array,disableLazyLoad:__chunk_4.PropTypes.bool,requiredFilterValuesMessage:__chunk_4.PropTypes.string}),MainTable.displayName="MainTable",module.exports=MainTable;
