"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=require("react"),React__default=_interopDefault(React),Select=_interopDefault(require("react-select"));function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var arrayWithoutHoles=_arrayWithoutHoles;function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}var iterableToArray=_iterableToArray;function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var nonIterableSpread=_nonIterableSpread;function _toConsumableArray(e){return arrayWithoutHoles(e)||iterableToArray(e)||nonIterableSpread()}var toConsumableArray=_toConsumableArray;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var classCallCheck=_classCallCheck;function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var createClass=_createClass;function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var _typeof_1=createCommonjsModule(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=n=function(e){return r(e)}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(e)}t.exports=n});function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var assertThisInitialized=_assertThisInitialized;function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof_1(t)&&"function"!=typeof t?assertThisInitialized(e):t}var possibleConstructorReturn=_possibleConstructorReturn,getPrototypeOf=createCommonjsModule(function(t){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.exports=r}),setPrototypeOf=createCommonjsModule(function(r){function n(e,t){return r.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}r.exports=n});function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&setPrototypeOf(e,t)}var inherits=_inherits;function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var defineProperty=_defineProperty,getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}var objectAssign=shouldUseNative()?Object.assign:function(e,t){for(var r,n,o=toObject(e),a=1;a<arguments.length;a++){for(var i in r=Object(arguments[a]))hasOwnProperty.call(r,i)&&(o[i]=r[i]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(r);for(var s=0;s<n.length;s++)propIsEnumerable.call(r,n[s])&&(o[n[s]]=r[n[s]])}}return o},ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret,printWarning=function(){};if("production"!==process.env.NODE_ENV){var ReactPropTypesSecret$1=ReactPropTypesSecret_1,loggedTypeFailures={};printWarning=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function checkPropTypes(e,t,r,n,o){if("production"!==process.env.NODE_ENV)for(var a in e)if(e.hasOwnProperty(a)){var i;try{if("function"!=typeof e[a]){var s=Error((n||"React class")+": "+r+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.");throw s.name="Invariant Violation",s}i=e[a](t,a,n,r,null,ReactPropTypesSecret$1)}catch(e){i=e}if(!i||i instanceof Error||printWarning((n||"React class")+": type specification of "+r+" `"+a+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof i+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;var l=o?o():"";printWarning("Failed "+r+" type: "+i.message+(null!=l?l:""))}}}var checkPropTypes_1=checkPropTypes,printWarning$1=function(){};function emptyFunctionThatReturnsNull(){return null}"production"!==process.env.NODE_ENV&&(printWarning$1=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});var factoryWithTypeCheckers=function(s,f){var a="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";var y="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:r(emptyFunctionThatReturnsNull),arrayOf:function(c){return r(function(e,t,r,n,o){if("function"!=typeof c)return new d("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=e[t];if(!Array.isArray(a)){var i=b(a);return new d("Invalid "+n+" `"+o+"` of type `"+i+"` supplied to `"+r+"`, expected an array.")}for(var s=0;s<a.length;s++){var l=c(a,s,r,n,o+"["+s+"]",ReactPropTypesSecret_1);if(l instanceof Error)return l}return null})},element:r(function(e,t,r,n,o){var a=e[t];if(s(a))return null;var i=b(a);return new d("Invalid "+n+" `"+o+"` of type `"+i+"` supplied to `"+r+"`, expected a single ReactElement.")}),instanceOf:function(l){return r(function(e,t,r,n,o){if(e[t]instanceof l)return null;var a=l.name||y,i=(s=e[t],s.constructor&&s.constructor.name?s.constructor.name:y);var s;return new d("Invalid "+n+" `"+o+"` of type `"+i+"` supplied to `"+r+"`, expected instance of `"+a+"`.")})},node:r(function(e,t,r,n,o){return l(e[t])?null:new d("Invalid "+n+" `"+o+"` supplied to `"+r+"`, expected a ReactNode.")}),objectOf:function(c){return r(function(e,t,r,n,o){if("function"!=typeof c)return new d("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=e[t],i=b(a);if("object"!==i)return new d("Invalid "+n+" `"+o+"` of type `"+i+"` supplied to `"+r+"`, expected an object.");for(var s in a)if(a.hasOwnProperty(s)){var l=c(a,s,r,n,o+"."+s,ReactPropTypesSecret_1);if(l instanceof Error)return l}return null})},oneOf:function(l){if(!Array.isArray(l))return"production"!==process.env.NODE_ENV&&printWarning$1("Invalid argument supplied to oneOf, expected an instance of array."),emptyFunctionThatReturnsNull;return r(function(e,t,r,n,o){for(var a=e[t],i=0;i<l.length;i++)if(c(a,l[i]))return null;var s=JSON.stringify(l);return new d("Invalid "+n+" `"+o+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+s+".")})},oneOfType:function(s){if(!Array.isArray(s))return"production"!==process.env.NODE_ENV&&printWarning$1("Invalid argument supplied to oneOfType, expected an instance of array."),emptyFunctionThatReturnsNull;for(var e=0;e<s.length;e++){var t=s[e];if("function"!=typeof t)return printWarning$1("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+n(t)+" at index "+e+"."),emptyFunctionThatReturnsNull}return r(function(e,t,r,n,o){for(var a=0;a<s.length;a++){var i=s[a];if(null==i(e,t,r,n,o,ReactPropTypesSecret_1))return null}return new d("Invalid "+n+" `"+o+"` supplied to `"+r+"`.")})},shape:function(u){return r(function(e,t,r,n,o){var a=e[t],i=b(a);if("object"!==i)return new d("Invalid "+n+" `"+o+"` of type `"+i+"` supplied to `"+r+"`, expected `object`.");for(var s in u){var l=u[s];if(l){var c=l(a,s,r,n,o+"."+s,ReactPropTypesSecret_1);if(c)return c}}return null})},exact:function(p){return r(function(e,t,r,n,o){var a=e[t],i=b(a);if("object"!==i)return new d("Invalid "+n+" `"+o+"` of type `"+i+"` supplied to `"+r+"`, expected `object`.");var s=objectAssign({},e[t],p);for(var l in s){var c=p[l];if(!c)return new d("Invalid "+n+" `"+o+"` key `"+l+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(p),null,"  "));var u=c(a,l,r,n,o+"."+l,ReactPropTypesSecret_1);if(u)return u}return null})}};function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){this.message=e,this.stack=""}function r(c){if("production"!==process.env.NODE_ENV)var u={},p=0;function e(e,t,r,n,o,a,i){if(n=n||y,a=a||r,i!==ReactPropTypesSecret_1){if(f){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var l=n+":"+r;!u[l]&&p<3&&(printWarning$1("You are manually calling a React.PropTypes validation function for the `"+a+"` prop on `"+n+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),u[l]=!0,p++)}}return null==t[r]?e?null===t[r]?new d("The "+o+" `"+a+"` is marked as required in `"+n+"`, but its value is `null`."):new d("The "+o+" `"+a+"` is marked as required in `"+n+"`, but its value is `undefined`."):null:c(t,r,n,o,a)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(s){return r(function(e,t,r,n,o,a){var i=e[t];return b(i)===s?null:new d("Invalid "+n+" `"+o+"` of type `"+u(i)+"` supplied to `"+r+"`, expected `"+s+"`.")})}function l(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(l);if(null===e||s(e))return!0;var t=function(e){var t=e&&(a&&e[a]||e[i]);if("function"==typeof t)return t}(e);if(!t)return!1;var r,n=t.call(e);if(t!==e.entries){for(;!(r=n.next()).done;)if(!l(r.value))return!1}else for(;!(r=n.next()).done;){var o=r.value;if(o&&!l(o[1]))return!1}return!0;default:return!1}}function b(e){var t,r=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(t=e,"symbol"===r||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol?"symbol":r)}function u(e){if(null==e)return""+e;var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function n(e){var t=u(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return d.prototype=Error.prototype,e.checkPropTypes=checkPropTypes_1,e.PropTypes=e};function emptyFunction(){}var factoryWithThrowingShims=function(){function e(e,t,r,n,o,a){if(a!==ReactPropTypesSecret_1){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=emptyFunction,r.PropTypes=r},propTypes=createCommonjsModule(function(e){if("production"!==process.env.NODE_ENV){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=factoryWithTypeCheckers(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},!0)}else e.exports=factoryWithThrowingShims()}),SelectTemplate=function(e){function r(e){var a;classCallCheck(this,r),a=possibleConstructorReturn(this,getPrototypeOf(r).call(this,e)),defineProperty(assertThisInitialized(assertThisInitialized(a)),"setValue",function(){var e=a.props,t=e.setValue,r=e.options;if(t){var n=Math.floor(Math.random()*(r.length-0)),o=2===t?r[n].value:r[0].value;a.handleOnChange(o)}}),defineProperty(assertThisInitialized(assertThisInitialized(a)),"completeAsyncLoading",function(){a.setState({options:a.props.options,isFetching:!1})}),defineProperty(assertThisInitialized(assertThisInitialized(a)),"handleOnChange",function(e){var t=a.props.nameParams,r=e;a.state.multi?e&&e.length&&(r=e.map(function(e){return e.value})):e&&(e.value||0===e.value)&&(r=e.value),a.setState({value:r}),a.props.onChange(r,t)}),defineProperty(assertThisInitialized(assertThisInitialized(a)),"filterOptions",function(e,t,r){var n=null;if(""!==t){var o=new RegExp("^"+t,"i"),a=new RegExp("\\b"+t,"i"),i=new RegExp(t,"gi");n=e.filter(function(e){return o.test(e.label)}),n=toConsumableArray(n).concat(toConsumableArray(e.filter(function(t){return a.test(t.label)&&!n.find(function(e){return e.value===t.value})}))),n=toConsumableArray(n).concat(toConsumableArray(e.filter(function(t){return i.test(t.label)&&!n.find(function(e){return e.value===t.value})})))}return n||e});var t=e.value;return a.state={multi:e.multi,options:toConsumableArray(e.options),value:t,isFetching:e.isFetching&&(!e.options||!e.options.length)},a}return inherits(r,e),createClass(r,[{key:"componentDidMount",value:function(){this.setValue()}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.value,r=e.isFetching,n=this.props,o=n.value,a=n.trackValue,i=n.options;r&&Object.keys(i).length&&(this.setValue(),this.completeAsyncLoading()),t!==o&&a&&this.setState({value:o})}},{key:"render",value:function(){var t=this,e=this.state,r=e.multi,n=e.value,o=e.isFetching,a=this.state.options,i=this.props,s=i.changeable,l=i.noOptionsMessage,c=i.className,u=i.disabled,p=i.searchable,f=i.clearable,y=i.placeholder;Object.keys(s).length&&(a=a.filter(function(e){return e[s.key]!==t.props[s.storeName][s.storeField]}));var d=n;r&&n?n.length&&(d=a.filter(function(t){return n.filter(function(e){return t.value===e}).length})):(n||0===n)&&(d=a.filter(function(e){return e.value===n}));var b={classNamePrefix:"select",isMulti:r,options:a,isLoading:o,onChange:this.handleOnChange,value:d,className:c,filterOptions:this.filterOptions,isDisabled:u,isSearchable:p,isClearable:f,placeholder:y,onOpen:this.onOpenSelect,noOptionsMessage:l};return React__default.createElement(React__default.Fragment,null,this.props.creatable?React__default.createElement(Select.Creatable,b):React__default.createElement(Select,b))}}]),r}(React.Component);defineProperty(SelectTemplate,"defaultProps",{nameParams:void 0,setValue:0,options:[],placeholder:"Выберите значение",className:"select",isFetching:!1,changeable:{},clearable:!0,searchable:!0,creatable:!1,disabled:!1,trackValue:!1,noOptionsMessage:function(){return"No data"},multi:!1}),defineProperty(SelectTemplate,"propTypes",{nameParams:propTypes.string,options:propTypes.array,onChange:propTypes.func.isRequired,className:propTypes.string,changeable:propTypes.object,clearable:propTypes.bool,setValue:propTypes.number,searchable:propTypes.bool,placeholder:propTypes.string,noOptionsMessage:propTypes.func,isFetching:propTypes.bool,disabled:propTypes.bool,creatable:propTypes.bool,trackValue:propTypes.bool,multi:propTypes.bool}),SelectTemplate.displayName="SelectTemplate",module.exports=SelectTemplate;
