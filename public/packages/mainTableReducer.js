"use strict";function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}require("./chunk-8a96f938.js");var __chunk_3=require("./chunk-4a240d20.js"),__chunk_6=require("./chunk-af08879b.js");require("./chunk-3cd28e33.js");var __chunk_8=require("./chunk-04fc15c7.js");require("./chunk-e635a9c8.js"),require("./chunk-fda73696.js");var __chunk_11=require("./chunk-c11a7971.js");require("./crud.js");var mainTableActions=require("./mainTableActions.js");function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){__chunk_6._defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var REQUEST_LIST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,SUCCESS_LIST_REGEXP=/^MT_LIST@(.+)_SUCCESS$/,FAILURE_LIST_REGEXP=/^MT_LIST@(.+)_FAILURE$/,SUCCESS_FILTERS_DATA_REGEXP=/^MT_FILTERS_DATA@(.+)_SUCCESS$/,tableExample={items:[],isLastPage:null,isLoading:!1,scroll:{},subLineData:{},filtersValue:{},blockedItems:[]},initialState={filtersData:{}},mainTableReducer=function(e,t){var n,a=0<arguments.length&&void 0!==e?e:initialState,i=1<arguments.length?t:void 0;if(i.type===mainTableActions.MT_REMOVE_SUBLINE_DATA){var r=i.meta,_=r.id,c=r.reducer;(n=__chunk_11.cloneDeep(a))[c].subLineData[_]&&delete n[c].subLineData[_]}if(i.type===mainTableActions.MT_GET_SUBLINE_DATA_REQUEST){var o=i.meta,u=o.id,s=o.subLineKey,l=o.reducer;(n=__chunk_11.cloneDeep(a))[l].subLineData[u]={isLoading:!0,items:[],key:s}}if(i.type===mainTableActions.MT_GET_SUBLINE_DATA_FAILURE){var d=i.meta,E=d.id,p=d.reducer;(n=__chunk_11.cloneDeep(a))[p].subLineData[E]&&delete n[p].subLineData[E]}if(i.type===mainTableActions.MT_GET_SUBLINE_DATA_SUCCESS){var T=i.meta,S=T.id,f=T.reducer,m=i.payload,b=m.status,y=m.payload,h=!!(n=__chunk_11.cloneDeep(a))[f].subLineData[S];"OK"===b&&y.items.length&&h?(n[f].subLineData[S].isLoading=!1,n[f].subLineData[S].items=__chunk_3._toConsumableArray(y.items)):h&&delete n[f].subLineData[S]}if(i.type===mainTableActions.MT_LIST_REMOVE_ITEM){var L=i.id,k=i.reducer,A=i.key,D=void 0===A?"id":A,I=__chunk_11.cloneDeep(a[k].items);I=(I=I.map(function(e){var t=__chunk_11.cloneDeep(e),n=t.findIndex(function(e){return e[D]===L});return 0<=n&&delete t[n],t.filter(function(e){return Boolean(e)})})).filter(function(e){return Array.isArray(e)&&e.length}).filter(function(e){return Boolean(e)}),(n=__chunk_11.cloneDeep(a))[k].items=I}if(i.type===mainTableActions.MT_LIST_AUTO_UPDATE_ITEM){var v=i.item,R=i.reducer,P=i.key,U=void 0===P?"id":P,j=v[U],C=__chunk_11.cloneDeep(a[R].items);C=C.map(function(e){var t=__chunk_11.cloneDeep(e),n=t.findIndex(function(e){return e[U]===j});return 0<=n&&(t[n]=v),t}),(n=__chunk_11.cloneDeep(a))[R].items=C}if(i.type===mainTableActions.MT_SAVE_TABLE_SCROLL){var O=i.reducer,g=i.scroll,M=__chunk_11.cloneDeep(a);n=_objectSpread({},M,__chunk_6._defineProperty({},O,_objectSpread({},M[O],{scroll:g})))}if(i.type===mainTableActions.MT_CHANGE_FILTERS_VALUE){var G=i.reducer,X=i.data,w=__chunk_11.cloneDeep(a),q=_objectSpread({},w[G],{filtersValue:_objectSpread({},w[G].filtersValue,{},X)});Object.entries(q.filtersValue).forEach(function(e){var t=__chunk_8._slicedToArray(e,2),n=t[0],a=t[1];!1!==a&&void 0!==a||delete q.filtersValue[n]}),0===X.offset&&(q.items=[]),n=_objectSpread({},a,__chunk_6._defineProperty({},i.reducer,q))}if(SUCCESS_FILTERS_DATA_REGEXP.test(i.type)){var F=i.type.match(SUCCESS_FILTERS_DATA_REGEXP)[1];if("OK"===i.payload.status){var V=i.payload.payload.items;(n=__chunk_11.cloneDeep(a)).filtersData[F]=V}}if(i.type===mainTableActions.MT_DISABLE_ITEM_SWITCHER){var x=i.data,B=i.reducer,K=i.byIndex;n=__chunk_11.cloneDeep(a),K||Object.keys(x).forEach(function(e){if(x[e]){n[B].blockedItems.indexOf(e)<0&&n[B].blockedItems.push(e)}else{var t=n[B].blockedItems.indexOf(e);0<=t&&delete n[B].blockedItems[t]}}),n[B].blockedItems=n[B].blockedItems.filter(function(e){return e})}if(REQUEST_LIST_REGEXP.test(i.type)){var $=i.type.match(REQUEST_LIST_REGEXP)[1];(n=__chunk_11.cloneDeep(a))[$].isLoading=!0}if(SUCCESS_LIST_REGEXP.test(i.type)){var N=i.type.match(SUCCESS_LIST_REGEXP)[1];if((n=__chunk_11.cloneDeep(a))[N].isLoading=!1,"OK"===i.payload.status){var Q=i.payload,H=Q.payload.items,W=Q._meta,z=W.is_last_page,J=W.total;n[N].isLastPage=z,n[N].total=J,H.length&&(n[N].items=[].concat(__chunk_3._toConsumableArray(n[N].items),[H]))}else n[N].isLastPage=!0,n[N].items=__chunk_3._toConsumableArray(n[N].items)}if(FAILURE_LIST_REGEXP.test(i.type)){var Y=i.type.match(FAILURE_LIST_REGEXP)[1];(n=__chunk_11.cloneDeep(a))[Y].isLoading=!1,n[Y].isLastPage=!0}if(i.type===mainTableActions.MT_LIST_UPDATE_ITEMS){var Z=i.items,ee=i.reducer;(n=__chunk_11.cloneDeep(a))[ee].items=Z}if(i.type===mainTableActions.MT_UPDATE_VISIBLE_COLUMNS){var te=i.data,ne=i.reducer;(n=__chunk_11.cloneDeep(a))[ne].visibleColumns=te}return n||a},mainTableReducer$1=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){initialState[e]=__chunk_11.cloneDeep(tableExample)}),mainTableReducer};module.exports=mainTableReducer$1;
