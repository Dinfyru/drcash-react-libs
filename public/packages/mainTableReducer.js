"use strict";function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}require("./chunk-8a96f938.js");var __chunk_3=require("./chunk-4a240d20.js"),__chunk_5=require("./chunk-36c07d1a.js");require("./chunk-3cd28e33.js");var __chunk_7=require("./chunk-ac2bcff6.js");require("./chunk-93b2e459.js");var __chunk_10=require("./chunk-c11a7971.js"),mainTableActions=require("./mainTableActions.js"),REQUEST_LIST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,SUCCESS_LIST_REGEXP=/^MT_LIST@(.+)_SUCCESS$/,FAILURE_LIST_REGEXP=/^MT_LIST@(.+)_FAILURE$/,SUCCESS_FILTERS_DATA_REGEXP=/^MT_FILTERS_DATA@(.+)_SUCCESS$/,tableExample={items:[],isLastPage:null,isLoading:!1,scroll:{},filtersValue:{},blockedItems:[]},initialState={filtersData:{}},reducer=function(){var _,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,t=1<arguments.length?arguments[1]:void 0;if(t.type===mainTableActions.MT_LIST_REMOVE_ITEM){var n=t.id,i=t.reducer,a=__chunk_10.cloneDeep(e[i].items);a=(a=a.map(function(e){var t=__chunk_10.cloneDeep(e),_=t.findIndex(function(e){return e.id===n});return 0<=_&&delete t[_],t.filter(function(e){return Boolean(e)})})).filter(function(e){return Array.isArray(e)&&e.length}).filter(function(e){return Boolean(e)}),(_=__chunk_10.cloneDeep(e))[i].items=a}if(t.type===mainTableActions.MT_LIST_AUTO_UPDATE_ITEM){var c=t.item,r=t.item.id,u=t.reducer,l=__chunk_10.cloneDeep(e[u].items);l=l.map(function(e){var t=__chunk_10.cloneDeep(e),_=t.findIndex(function(e){return e.id===r});return 0<=_&&(t[_]=c),t}),(_=__chunk_10.cloneDeep(e))[u].items=l}if(t.type===mainTableActions.MT_SAVE_TABLE_SCROLL){var o=t.reducer,s=t.scroll,E=__chunk_10.cloneDeep(e);_=__chunk_7._objectSpread({},E,__chunk_5._defineProperty({},o,__chunk_7._objectSpread({},E[o],{scroll:s})))}if(t.type===mainTableActions.MT_CHANGE_FILTERS_VALUE){var d=t.reducer,S=t.data,T=__chunk_10.cloneDeep(e),f=__chunk_7._objectSpread({},T[d],{filtersValue:__chunk_7._objectSpread({},T[d].filtersValue,S)});Object.entries(f.filtersValue).forEach(function(e){var t=__chunk_7._slicedToArray(e,2),_=t[0],n=t[1];!1!==n&&void 0!==n||delete f.filtersValue[_]}),0===S.offset&&(f.items=[]),_=__chunk_7._objectSpread({},e,__chunk_5._defineProperty({},t.reducer,f))}if(SUCCESS_FILTERS_DATA_REGEXP.test(t.type)){var p=t.type.match(SUCCESS_FILTERS_DATA_REGEXP)[1];if("OK"===t.payload.status){var h=t.payload.payload.items;(_=__chunk_10.cloneDeep(e)).filtersData[p]=h}}if(t.type===mainTableActions.MT_DISABLE_ITEM_SWITCHER){var m=t.data,k=t.reducer,I=t.byIndex;_=__chunk_10.cloneDeep(e),I||Object.keys(m).forEach(function(e){if(m[e]){_[k].blockedItems.indexOf(e)<0&&_[k].blockedItems.push(e)}else{var t=_[k].blockedItems.indexOf(e);0<=t&&delete _[k].blockedItems[t]}}),_[k].blockedItems=_[k].blockedItems.filter(function(e){return e})}if(REQUEST_LIST_REGEXP.test(t.type)){var L=t.type.match(REQUEST_LIST_REGEXP)[1];(_=__chunk_10.cloneDeep(e))[L].isLoading=!0}if(SUCCESS_LIST_REGEXP.test(t.type)){var A=t.type.match(SUCCESS_LIST_REGEXP)[1];if("OK"===t.payload.status){var b=t.payload,y=b.payload.items,R=b._meta,v=R.is_last_page,D=R.total;(_=__chunk_10.cloneDeep(e))[A].isLoading=!1,_[A].isLastPage=v,_[A].total=D,y.length&&(_[A].items=[].concat(__chunk_3._toConsumableArray(_[A].items),[y]))}}if(FAILURE_LIST_REGEXP.test(t.type)){var C=t.type.match(FAILURE_LIST_REGEXP)[1];(_=__chunk_10.cloneDeep(e))[C].isLoading=!1,_[C].isLastPage=!0}if(t.type===mainTableActions.MT_LIST_UPDATE_ITEMS){var U=t.items,P=t.reducer;(_=__chunk_10.cloneDeep(e))[P].items=U}if(t.type===mainTableActions.MT_UPDATE_VISIBLE_COLUMNS){var M=t.data,j=t.reducer;(_=__chunk_10.cloneDeep(e))[j].visibleColumns=M}return _||e},mainTableReducer=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){initialState[e]=__chunk_10.cloneDeep(tableExample)}),reducer};module.exports=mainTableReducer;
